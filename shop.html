<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width initial-scale=1">
	<link rel="stylesheet" href="style.css" media="all">
	<title>Shop</title>

	<script>
	        function openNav() {
	        	document.getElementById("mySidenav").style.width = "250px";
			document.addEventListener("keydown", event => { //Stäng sidenav om man trycker på escape
			  if (event.keyCode == 27) { //27 är keycode för escape
				closeNav();
			  }
			});
	        }
	              
	        function closeNav() {
	        	document.getElementById("mySidenav").style.width = "0";
	        }
	</script>

	<script>
		document.write('<script src="script/jquery.1.6.1.min.js"><\/script>');
		document.write('<script src="script/simpleCart.js"><\/script>');
	</script>

	<script>
		simpleCart({
			checkout: { 
				type: "PayPal" , 
				email: "you@yours.com",
			}
		});	
		simpleCart.currency( "SEK" ); 
	</script>

	<script> 
	fetch("include/nav.html")
		.then(resp => resp.text())
		.then(text => {
			const inc_cont = document.getElementById("navbar");
			inc_cont.innerHTML = text;
		})

	fetch("include/footer.html")
		.then(resp => resp.text())
		.then(text => {
			const inc_cont = document.getElementById("included-footer");
			inc_cont.innerHTML = text;
		})
	</script> 
</head>
<body>
	<div id="navbar"></div> 

	<script> 
		// Uppdaterar cart quantity, annars är den tom när refershar:
    		document.getElementById("navbar").innerHTML='<object type="text/html" data="side.html" ></object>';

		function search(input) {
			requestAnimationFrame(() => {
				const query = input.value.toLowerCase();
				const products = document.getElementsByClassName("product");
				for (const product of products) {
					const name = product.getElementsByTagName("p")[0].innerText.toLowerCase();
					console.log(query, name);
					if (!name.includes(query)) {
						product.style.display = "none";
					} else {
						product.style.display = "block";
					}
				}

				if (query === "") {
					for (const product of products) {
						product.style.display = "block";
					}
				}
			})
		}
	</script>

	<div id="std-backgroundimage" style="background-image: url('images/woods.jpg');">
		<div class="bgimage-caption">Shop</div>
	</div>

	<div class="std-margin">
		<div class="underline-caption">All products</div>
		<div class="searchbar">
			<input id="searchinput" type="text" placeholder="Search for over 1 product..." onkeydown="search(this)">
			<img class="magnifying" src="images/blackmagnify.svg" width="20" alt="magnifying glas">
		</div>

		<div class="products">
			<div class="product">
				<img src="images/products/brownboots.jpg" alt="brown boots">
				<p>Quality brown boots</p>
				<div class="price">1499kr</div>
				<button onclick="simpleCart.add({name: 'Brown boots' , price: 1499, quantity: 1});">
					Add To Cart
				</button>
			</div>

			<div class="product">
				<img src="images/products/greenboots.jpg" alt="boots">
				<p>Green hiking boots</p>
				<div class="price">1049kr</div>
				<button onclick="simpleCart.add({name: 'Green boots' , price: 1049, quantity: 1});">
					Add To Cart
				</button>
			</div>

			<div class="product">
				<img src="images/products/swissarmy.jpg" alt="swiss army knife">
				<p>Swiss army knife</p>
				<div class="price">199kr</div>
				<button onclick="simpleCart.add({name: 'Swiss army knife' , price: 199, quantity: 1});">
					Add To Cart
				</button>
			</div>

			<div class="product">
				<img src="images/products/simple-green-backpack.jpg" alt="simple green backpack">
				<p>Simple green backpack</p>
				<div class="price">949kr</div>
				<button onclick="simpleCart.add({name: 'Simple green backpack' , price: 949, quantity: 1});">
					Add To Cart
				</button>
			</div>

			<div class="product">
				<img src="images/products/red-large-backpack.jpg" alt="red large backpack">
				<p>Large red backpack</p>
				<div class="price">1099kr</div>
				<button onclick="simpleCart.add({name: 'Large red backpack' , price: 1099, quantity: 1});">
					Add To Cart
				</button>
			</div>

			<div class="product">
				<img src="images/products/bluetent.jpg" alt="blue tent">
				<p>High quality blue tent</p>
				<div class="price">3499kr</div>
				<button onclick="simpleCart.add({name: 'Blue tent' , price: 3499, quantity: 1});">
					Add To Cart
				</button>
			</div>
		</div>
	</div>

	<script>
		//function (resp) {return resp.json()}
		fetch("jsonnare.json")
			.then(resp => resp.json())
			.then(items => {
				console.log("kolla alla mina fina föremål som du kan coppa", items);
		}).catch(e => {
				console.log("nämen", e);
		})

		const items = [
			{name:"hejare",price: 1337},
			{name:"nejare",price: 2},
			{name:"jejare",price: 1338},
		]
		const prods = document.getElementsByClassName("products")[0];
		for (const item of items) {
			const element =document.createElement("div");
			element.innerHTML = `
			<div class="product">
				<img src="images/products/bluetent.jpg" alt="blue tent">
				<p>${item.name}</p>
				<div class="price">${item.price}kr</div>
					<button onclick="simpleCart.add({name: '${item.name}' , price: ${item.price}, quantity: 1});">
					Add To Cart
				</button>
			</div>`;
			prods.appendChild(element);
		}

	</script>

	<div id="included-footer"></div>
</body>
</html>
